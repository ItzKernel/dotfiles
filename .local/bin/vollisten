#!/bin/bash

# Function to get the current volume
get_volume() {
    pactl get-sink-volume @DEFAULT_SINK@ | awk '{print $5}' | tr -d '%'
}

# Get the initial volume
current_volume=$(get_volume)
echo $current_volume

# Subscribe to PulseAudio events
pactl subscribe | grep --line-buffered "sink" | while read line; do
    new_volume=$(get_volume)
    if [ "$new_volume" != "$current_volume" ]; then
        echo $new_volume
        current_volume=$new_volume
    fi
done

